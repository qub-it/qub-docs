[#assign responsibleUnit = ""]
[#if documentSignature.responsibleUnit??]
    [#assign responsibleUnit = lang.i18n(documentSignature.responsibleUnit)?replace("\\n","\n")]
[/#if]

[#assign hasUnit = false]
[#if responsibleUnit?length > 0]
    [#assign hasUnit = true]
[/#if]

[#assign responsibleName = documentSignature.responsibleName]
[#assign responsibleFunction= lang.i18n(documentSignature.responsibleFunction)]
[#assign responsibleNameFunction = responsibleName + ", " + responsibleFunction]

[#assign responsibleNameFunctionUnit = responsibleNameFunction]
[#if hasUnit]
    [#assign responsibleUnitPreposition = do]
    [#if responsibleUnit?contains(Divisao)]
        [#assign responsibleUnitPreposition = da]
    [/#if]
    [#if responsibleUnit?contains(Direcao)]
        [#assign responsibleUnitPreposition = da]
    [/#if]
    [#assign responsibleNameFunctionUnit = "${responsibleNameFunctionUnit} ${responsibleUnitPreposition} ${responsibleUnit}"]
[/#if]

[#assign responsibleShortName= documentSignature.responsibleShortName]
[#if documentSignerIsMale]
    [#assign responsible_O = prep_O]    
[#else]
    [#assign responsible_O = prep_A]
[/#if]

[#assign showResponsibleName = false]
[#if serviceRequest.hasProperty("showResponsibleName")]
    [#assign showResponsibleName = serviceRequest.findProperty("showResponsibleName").getValue()]
[/#if]

[#if documentSignerIsMale]
    [#assign responsible_O = prep_O]    
[#else]
    [#assign responsible_O = prep_A]
[/#if]
[#assign responsibleMaybeNameFunction = responsible_O + " " + responsibleFunction]
[#if showResponsibleName]
    [#assign responsibleMaybeNameFunction = "${responsibleShortName}\n${responsible_O} ${responsibleFunction}"]
[/#if]